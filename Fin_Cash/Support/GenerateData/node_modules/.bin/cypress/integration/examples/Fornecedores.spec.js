it("Cria fornecedores", function() {        
    cy.visit("https://en.wikipedia.org/wiki/List_of_largest_companies_by_revenue").then(
      () => {
        cy.wait(500).then(() => {            
            cy.get('#List_of_largest_companies_by_revenue').parent().next().next().find('tbody > tr').then(                        
                elem => {                               
                  console.log(elem.length);
                  cy.CreateArray(0, elem.length, []);
                }
            )
        });
      }
    );
  });

  Cypress.Commands.add('CreateArray', (i, length, arrFornecedores) => {    
    if (i < length) {                
        cy.get('#List_of_largest_companies_by_revenue').parent().next().next().find('tbody > tr').eq(i).find('td').eq(0).then(            
            e => {                                                                                                      
                var obj = {
                  id: i + 1,
                  name: e[0].innerText
                };
                arrFornecedores.push(obj);                
            }            
        );         
        cy.writeFile('Fornecedores.json', arrFornecedores);
        cy.CreateArray(i + 1, length, arrFornecedores);
    }
    else
    {                
        console.log("Process ended");
    }
})